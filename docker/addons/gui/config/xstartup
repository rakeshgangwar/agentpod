#!/bin/bash
# KasmVNC xstartup script for OpenCode Desktop Container
# This script starts the window manager and panel when KasmVNC launches

# Set environment
export HOME=/home/developer
export DISPLAY=:1

# Start D-Bus session (required for some desktop apps)
if [ -z "$DBUS_SESSION_BUS_ADDRESS" ]; then
    eval $(dbus-launch --sh-syntax)
    export DBUS_SESSION_BUS_ADDRESS
fi

# Start the window manager
openbox --config-file /home/developer/.config/openbox/rc.xml &

# Start the panel
tint2 -c /home/developer/.config/tint2/tint2rc &

# Keep the script running (required by KasmVNC)
wait
