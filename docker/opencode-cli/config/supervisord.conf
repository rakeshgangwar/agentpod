; OpenCode CLI - Supervisor Configuration
; Manages OpenCode and Code Server services

[supervisord]
nodaemon=true
logfile=/tmp/supervisord.log
pidfile=/tmp/supervisord.pid
childlogdir=/tmp

[program:opencode]
command=/usr/bin/opencode serve --port %(ENV_OPENCODE_PORT)s --hostname %(ENV_OPENCODE_HOST)s
directory=/home/developer/workspace
environment=HOME="/home/developer"
user=developer
autorestart=true
priority=100
stdout_logfile=/tmp/opencode.log
stderr_logfile=/tmp/opencode.err

[program:code-server]
command=/usr/bin/code-server --bind-addr 0.0.0.0:%(ENV_CODE_SERVER_PORT)s --auth %(ENV_CODE_SERVER_AUTH)s --disable-telemetry /home/developer/workspace
environment=HOME="/home/developer"
user=developer
autorestart=true
priority=200
stdout_logfile=/tmp/code-server.log
stderr_logfile=/tmp/code-server.err
