---
import BaseLayout from "../layouts/BaseLayout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

const featureCategories = [
  {
    title: "Project Management",
    command: "$ sandbox",
    features: [
      "Create sandboxes from scratch, clone from GitHub, or import existing repos",
      "Multiple sandboxes running simultaneously",
      "Per-project LLM configuration",
      "Resource tiers (Starter, Builder, Creator, Power)",
    ],
  },
  {
    title: "AI Chat Interface",
    command: "$ agent",
    features: [
      "Real-time streaming via SSE",
      "Session history and management",
      "File references with @mentions",
      "Permission system for destructive actions",
      "Multi-turn conversations with context",
    ],
  },
  {
    title: "File System",
    command: "$ files",
    features: [
      "Full file browser with tree view",
      "Syntax highlighting (Shiki) for 50+ languages",
      "Search across project",
      "Git history per file",
      "Reference files directly in chat",
    ],
  },
  {
    title: "Terminal Access",
    command: "$ terminal",
    features: [
      "Full xterm.js terminal in each sandbox",
      "Direct shell access to containers",
      "Run build tools, tests, debuggers",
      "Multi-tab terminal sessions",
    ],
  },
  {
    title: "Theme System",
    command: "$ theme",
    features: [
      "20+ curated themes",
      "Modular design (colors + fonts separately)",
      "Light/dark mode auto-switching",
      "Custom theme support",
    ],
  },
  {
    title: "LLM Providers",
    command: "$ llm",
    features: [
      "API key providers: OpenRouter, OpenAI, Anthropic, etc.",
      "OAuth providers: GitHub Copilot, Claude Pro/Max",
      "Local models: Ollama integration",
      "Per-project provider override",
    ],
  },
];

const containerFlavors = [
  { name: "JavaScript", languages: "Node 22, Deno, Bun", tools: "pnpm, Vite, TypeScript", size: "~800MB" },
  { name: "Python", languages: "Python 3.12", tools: "pip, Jupyter, ML libs", size: "~1.2GB" },
  { name: "Go", languages: "Go 1.22", tools: "golangci-lint", size: "~900MB" },
  { name: "Rust", languages: "Rust stable", tools: "cargo, clippy", size: "~1.1GB" },
  { name: "Fullstack", languages: "Node + Python", tools: "Best of both", size: "~1.8GB" },
  { name: "Polyglot", languages: "All languages", tools: "Everything", size: "~3GB" },
];

const productionFeatures = [
  { title: "HTTPS", description: "Automatic SSL via Let's Encrypt + Traefik" },
  { title: "Database", description: "PostgreSQL + pgvector for embeddings" },
  { title: "Backups", description: "Automated backups with retention policies" },
  { title: "Monitoring", description: "Grafana dashboards for observability" },
  { title: "Logging", description: "Loki + Fluent Bit log aggregation" },
  { title: "CI/CD", description: "GitHub Actions + Forgejo Actions pipelines" },
];
---

<BaseLayout title="Features â€” AgentPod">
  <Header slot="header" />
  
  <section class="py-20">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <h1 class="text-4xl font-bold font-mono tracking-tight text-cyber-cyan sm:text-5xl glitch-hover reveal-fade">
          &gt; features --list
        </h1>
        <p class="mt-4 text-lg text-muted-foreground max-w-2xl mx-auto reveal-fade reveal-delay-1">
          Everything you need to build with AI agents
        </p>
      </div>
    </div>
  </section>

  <section class="py-12 bg-background">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="grid gap-8 lg:grid-cols-2">
        {featureCategories.map((category, index) => (
          <div class={`terminal-window reveal-slide-up reveal-delay-${Math.min(index % 2 + 1, 6)}`}>
            <div class="terminal-header">
              <span class="text-xs">{category.command}</span>
            </div>
            <div class="terminal-body">
              <h2 class="text-sm font-semibold font-mono text-cyber-cyan mb-4">
                {category.title}
              </h2>
              <ul class="space-y-2">
                {category.features.map((feature) => (
                  <li class="flex items-start gap-2 text-xs hover:translate-x-1 transition-transform">
                    <span class="text-cyber-emerald shrink-0">&gt;</span>
                    <span class="text-muted-foreground">{feature}</span>
                  </li>
                ))}
              </ul>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <section class="py-20 bg-card/50">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-xs font-mono text-cyber-cyan uppercase tracking-widest reveal-fade">
          // CONTAINER FLAVORS
        </h2>
        <p class="mt-4 text-muted-foreground reveal-fade reveal-delay-1">
          Pre-built environments for your language of choice
        </p>
      </div>
      
      <div class="terminal-window overflow-x-auto reveal-slide-up">
        <div class="terminal-header">
          <span class="text-xs">docker images --format table</span>
        </div>
        <div class="terminal-body">
          <table class="w-full text-left font-mono text-xs">
            <thead>
              <tr class="border-b border-border">
                <th class="py-2 px-2 text-cyber-cyan">FLAVOR</th>
                <th class="py-2 px-2 text-cyber-cyan">LANGUAGES</th>
                <th class="py-2 px-2 text-cyber-cyan">TOOLS</th>
                <th class="py-2 px-2 text-cyber-cyan">SIZE</th>
              </tr>
            </thead>
            <tbody>
              {containerFlavors.map((flavor) => (
                <tr class="border-b border-border/50 hover:bg-card/50 transition-colors">
                  <td class="py-2 px-2 text-cyber-emerald">{flavor.name}</td>
                  <td class="py-2 px-2 text-muted-foreground">{flavor.languages}</td>
                  <td class="py-2 px-2 text-muted-foreground">{flavor.tools}</td>
                  <td class="py-2 px-2 text-cyber-cyan">{flavor.size}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <section class="py-20 bg-background">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-xs font-mono text-cyber-cyan uppercase tracking-widest reveal-fade">
          // PRODUCTION READY
        </h2>
        <p class="mt-4 text-muted-foreground reveal-fade reveal-delay-1">
          Deploy with confidence
        </p>
      </div>
      
      <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {productionFeatures.map((feature, index) => (
          <div class={`terminal-window reveal-slide-up reveal-delay-${Math.min(index % 3 + 1, 6)}`}>
            <div class="terminal-header">
              <span class="text-xs">{feature.title.toLowerCase()}.service</span>
            </div>
            <div class="terminal-body">
              <div class="flex items-center gap-2 mb-2">
                <span class="status-dot status-running"></span>
                <span class="text-xs font-mono text-cyber-emerald">ACTIVE</span>
              </div>
              <p class="text-xs text-muted-foreground">{feature.description}</p>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <section class="py-20">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 text-center">
      <div class="font-mono text-lg text-cyber-cyan mb-6">
        &gt; READY TO DEPLOY?
      </div>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="/download" class="cyber-btn-primary cyber-btn">
          $ DOWNLOAD
        </a>
        <a href="https://github.com/rakeshgangwar/agentpod#readme" target="_blank" rel="noopener noreferrer" class="cyber-btn">
          $ VIEW DOCS
        </a>
      </div>
    </div>
  </section>

  <Footer slot="footer" />
</BaseLayout>

<script>
import '../scripts/main.ts';
</script>
