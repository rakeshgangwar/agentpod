{
  "name": "Demo API Pipeline",
  "description": "A demo workflow showing trigger, HTTP request, data transformation, conditions, and JavaScript execution",
  "nodes": [
    {
      "id": "trigger-1",
      "type": "trigger",
      "position": { "x": 100, "y": 200 },
      "data": {
        "nodeType": "manual-trigger",
        "label": "Start Workflow",
        "triggerType": "manual",
        "description": "Manually trigger this workflow"
      }
    },
    {
      "id": "set-var-1",
      "type": "action",
      "position": { "x": 350, "y": 200 },
      "data": {
        "nodeType": "set-variable",
        "label": "Set User ID",
        "variableName": "userId",
        "value": "1"
      }
    },
    {
      "id": "http-1",
      "type": "action",
      "position": { "x": 600, "y": 200 },
      "data": {
        "nodeType": "http-request",
        "label": "Fetch User",
        "url": "https://jsonplaceholder.typicode.com/users/1",
        "method": "GET",
        "headers": {
          "Accept": "application/json"
        },
        "responseType": "json",
        "timeout": 30000
      }
    },
    {
      "id": "parse-1",
      "type": "action",
      "position": { "x": 850, "y": 200 },
      "data": {
        "nodeType": "parse-json",
        "label": "Parse Response",
        "inputPath": "steps.http-1.data.data"
      }
    },
    {
      "id": "transform-1",
      "type": "action",
      "position": { "x": 1100, "y": 200 },
      "data": {
        "nodeType": "transform",
        "label": "Extract User Info",
        "inputPath": "steps.parse-1.data.data",
        "mode": "map",
        "mapping": [
          { "from": "name", "to": "userName" },
          { "from": "email", "to": "userEmail" },
          { "from": "address.city", "to": "userCity" }
        ]
      }
    },
    {
      "id": "condition-1",
      "type": "condition",
      "position": { "x": 1350, "y": 200 },
      "data": {
        "nodeType": "condition",
        "label": "Check City",
        "conditions": [
          {
            "field": "steps.transform-1.data.data.userCity",
            "operator": "isNotEmpty",
            "outputBranch": "true"
          }
        ],
        "defaultBranch": "false",
        "mode": "first"
      }
    },
    {
      "id": "js-success",
      "type": "action",
      "position": { "x": 1600, "y": 100 },
      "data": {
        "nodeType": "javascript",
        "label": "Log Success",
        "code": "const data = steps['transform-1']?.data?.data || $input;\nconst userName = data.userName || 'Unknown';\nconst userCity = data.userCity || 'Unknown';\nconst userEmail = data.userEmail || 'Unknown';\nreturn {\n  success: true,\n  message: `User ${userName} from ${userCity} (${userEmail}) processed successfully`,\n  timestamp: new Date().toISOString()\n};",
        "inputs": {}
      }
    },
    {
      "id": "js-fallback",
      "type": "action",
      "position": { "x": 1600, "y": 300 },
      "data": {
        "nodeType": "javascript",
        "label": "Log Fallback",
        "code": "return {\n  success: false,\n  message: 'User data incomplete - city not found',\n  timestamp: new Date().toISOString()\n};",
        "inputs": {}
      }
    }
  ],
  "edges": [
    {
      "id": "e1",
      "source": "trigger-1",
      "target": "set-var-1",
      "animated": true
    },
    {
      "id": "e2",
      "source": "set-var-1",
      "target": "http-1",
      "animated": true
    },
    {
      "id": "e3",
      "source": "http-1",
      "target": "parse-1",
      "animated": true
    },
    {
      "id": "e4",
      "source": "parse-1",
      "target": "transform-1",
      "animated": true
    },
    {
      "id": "e5",
      "source": "transform-1",
      "target": "condition-1",
      "animated": true
    },
    {
      "id": "e6-true",
      "source": "condition-1",
      "target": "js-success",
      "sourceHandle": "true",
      "animated": true,
      "label": "Has City"
    },
    {
      "id": "e6-false",
      "source": "condition-1",
      "target": "js-fallback",
      "sourceHandle": "false",
      "animated": true,
      "label": "No City"
    }
  ]
}
